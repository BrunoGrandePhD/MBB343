---
title: "Data Structures - the types of data"
output: html_notebook
---

Now that you have some idea on how to navigate around R studio. Let's get some important business rolling. A deadly pandemic has occurred. Virologists have named it severe acute respiratory syndrome coronavirus 2 (SARS-CoV-2) while the disease associated with it is now referred to as COVID-19. The EU has collected data on this outbreak and you and your fellow members of the Pandemic Intelligence (PI) team want to get some insights from this data. The data you are looking at today is downloaded from [EU open data portal](https://data.europa.eu/euodp/en/data/dataset/covid-19-coronavirus-data) on June 14, 2020. We have removed some of its columns that you don't need in this lab.


## Data inspection

First we load the data. Often time the data comes in the form of csv, or tab-delimited files. Sometimes the data can be too big to be opened in Excel or other softwares and be looked at row-by-row. That's why it's useful to know tools like command line and R to help you understand the data quickly. 

The dataset is in the same folder as this Rmarkdown. Called `covid19_cases_world.csv`. If you go into this folder using the `cd` command, and type `head covid19_cases_world.csv` in the terminal, it'd show you the first 10 lines of this data. One way to access the terminal in RStudio. It's one of the tabs in the lower right panel.


```{bash}
head covid19_cases_world.csv  # this is a command in the terminal, not R code
```
Now you see that our data consists of a header, which is the column names of the data. The data entries in each row is separated by ",". These are important to know for us to load the data into our R code and start analyzing it. 

Let's now load the data in our R notebook. 

```{r}
covid <- read.table(file='covid19_cases_world.csv', header = TRUE, sep=',')
```

Here we are calling this function "read.table" with the path to our data, and telling it that it should parse the data by taking the existance of header and the separate into account. How do we know what this function does and what arguments to give? You can read the documentation of this function by typing `?read.table` in the R console. The help tab on the right will then show you how to use this function. The documentation will also show you what are the "default" arguments to the parameters of the read.table function (i.e. the defaults if you don't specify them). However, it's still good to spell out the default just to make your report easier to read.

```
Note: did you get a `No such file or directory` error? Make sure that your working environment is in the right directory. You can set it by going to the menu: Session > Set working directory > To source file location. That would make sure your working directory is the same as this R markdown, which is also where the data is. 
```

We can now get a glimpse to what the dataset look like by using the function "str".

```{r}
str(covid)
```
This function displays the internal structure of this R object, which is a data.frame. Data frame is the most common data structure we uses when analyzing data in R. It's basically a 2-D row-column table. It tells us that there are `r nrow(covid)` rows in our dataset and `r ncol(covid)` columns, along with the data types of those columns.

Inspecting the data type is important before you start any analysis. "read.table" would do its best to guess what the data type of each column is, but sometimes it can get it wrong. "int" means they're integer. Factor means it's categorical. It make sense that "countriesAndTerritories" is category, and there are `r length(unique(covid$countriesAndTerritories))` different ones. However, it doesn't make sense that "dateRep" column is of Factor type. We would need to fix that if we are going plot something like a time series.

Factor type allows you to split up the data by categories. This comes in handy when you need to do analysis or have split pannels that visualize data that belong to different category (i.e. by country, for example). We will explore that in the next lab. 

Let's try one more thing: 

```{r}
summary(covid)
```

As you can see, you can quickly get the range, minimum, average (mean), and maxium of each column, as well as the number of observations for each category. "str" and "summary" are just one of the few handy R functions that let you quickly get an idea of how your data look like before planning your analysis.

## Looking at just Canada

Let's look the covid 19 cases and deaths just in Canada. To do this, we need to subset the dataset.


## Total cumulative cases in different continent


## Total deaths in different months


## Death rate 


# Assignment 

The media, the public, friends and family really appreciate your PI team's initial reporting from the EU data. However, they got more questions for you. 

### Highest and lowest death rates 

The WHO wants to know, of the countries that have >10,000 cases, which one has the highest death rate and which one has the lowest death rate to better understand the health care systems of some countries. Please store the number 10000 in a separate variable so that the WHO can easily adjust that threshold in your code snippet instead of coming back to you to ask the same question.


### On April 22. 

Your friend Bob really want to know the total number of new cases on Earth day (April 22) worldwide and he wants to know how you get that number. Please show and describe how you get the number from this dataset so that Bob can do it himself next time.


### In Europe, cumulative cases by countries

Some media outlets want to get the cumulative cases in 2020 of different countries in Europe. Please write them a snippet of code to get this answer and store 'Europe' in a separate variable. That way their analysts can simpily change the variable to get information about other continents, avoiding mistakes resulting in erroneous reporting.







